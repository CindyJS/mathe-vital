<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    
    <title>TaylorFrac.cdy</title>
    <style type="text/css">
        * {
            margin: 0px;
            padding: 0px;
        }

        #CSConsole {
            background-color: #FAFAFA;
            border-top: 1px solid #333333;
            bottom: 0px;
            height: 200px;
            overflow-y: scroll;
            position: fixed;
            width: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://cindyjs.org/dist/v0.8/CindyJS.css">
    <script type="text/javascript" src="https://cindyjs.org/dist/v0.8/Cindy.js"></script>
<script id="csdraw" type="text/x-cindyscript">

f(x):=1/(x^2+1);
plot(f(x));
A.y=f(A.x);
p=-A.x;
coeffs=
[(1 + p^2)^(-1), (2*p)/(1 + p^2)^2, 
  (-1 + 3*p^2)/(1 + p^2)^3, (4*(-p + p^3))/(1 + p^2)^4, 
  (1 - 10*p^2 + 5*p^4)/(1 + p^2)^5, (2*(3*p - 10*p^3 + 3*p^5))/
   (1 + p^2)^6, (-1 + 21*p^2 - 35*p^4 + 7*p^6)/(1 + p^2)^7, 
  (8*(-p + 7*p^3 - 7*p^5 + p^7))/(1 + p^2)^8, 
  (1 - 36*p^2 + 126*p^4 - 84*p^6 + 9*p^8)/(1 + p^2)^9, 
  (2*(5*p - 60*p^3 + 126*p^5 - 60*p^7 + 5*p^9))/(1 + p^2)^10, 
  ((1024*p^10)/(1 + p^2)^10 - (2304*p^8)/(1 + p^2)^9 + 
    (1792*p^6)/(1 + p^2)^8 - (560*p^4)/(1 + p^2)^7 + 
    (60*p^2)/(1 + p^2)^6 - (1 + p^2)^(-5))/(1 + p^2), 
  ((2048*p^11)/(1 + p^2)^11 - (5120*p^9)/(1 + p^2)^10 + 
    (4608*p^7)/(1 + p^2)^9 - (1792*p^5)/(1 + p^2)^8 + 
    (280*p^3)/(1 + p^2)^7 - (12*p)/(1 + p^2)^6)/(1 + p^2), 
  ((4096*p^12)/(1 + p^2)^12 - (11264*p^10)/(1 + p^2)^11 + 
    (11520*p^8)/(1 + p^2)^10 - (5376*p^6)/(1 + p^2)^9 + 
    (1120*p^4)/(1 + p^2)^8 - (84*p^2)/(1 + p^2)^7 + (1 + p^2)^(-6))/
   (1 + p^2), ((8192*p^13)/(1 + p^2)^13 - (24576*p^11)/(1 + p^2)^12 + 
    (28160*p^9)/(1 + p^2)^11 - (15360*p^7)/(1 + p^2)^10 + 
    (4032*p^5)/(1 + p^2)^9 - (448*p^3)/(1 + p^2)^8 + (14*p)/(1 + p^2)^7)/
   (1 + p^2), ((16384*p^14)/(1 + p^2)^14 - (53248*p^12)/(1 + p^2)^13 + 
    (67584*p^10)/(1 + p^2)^12 - (42240*p^8)/(1 + p^2)^11 + 
    (13440*p^6)/(1 + p^2)^10 - (2016*p^4)/(1 + p^2)^9 + 
    (112*p^2)/(1 + p^2)^8 - (1 + p^2)^(-7))/(1 + p^2), 
  ((32768*p^15)/(1 + p^2)^15 - (114688*p^13)/(1 + p^2)^14 + 
    (159744*p^11)/(1 + p^2)^13 - (112640*p^9)/(1 + p^2)^12 + 
    (42240*p^7)/(1 + p^2)^11 - (8064*p^5)/(1 + p^2)^10 + 
    (672*p^3)/(1 + p^2)^9 - (16*p)/(1 + p^2)^8)/(1 + p^2), 
  ((65536*p^16)/(1 + p^2)^16 - (245760*p^14)/(1 + p^2)^15 + 
    (372736*p^12)/(1 + p^2)^14 - (292864*p^10)/(1 + p^2)^13 + 
    (126720*p^8)/(1 + p^2)^12 - (29568*p^6)/(1 + p^2)^11 + 
    (3360*p^4)/(1 + p^2)^10 - (144*p^2)/(1 + p^2)^9 + (1 + p^2)^(-8))/
   (1 + p^2), ((131072*p^17)/(1 + p^2)^17 - (524288*p^15)/(1 + p^2)^16 + 
    (860160*p^13)/(1 + p^2)^15 - (745472*p^11)/(1 + p^2)^14 + 
    (366080*p^9)/(1 + p^2)^13 - (101376*p^7)/(1 + p^2)^12 + 
    (14784*p^5)/(1 + p^2)^11 - (960*p^3)/(1 + p^2)^10 + 
    (18*p)/(1 + p^2)^9)/(1 + p^2), 
  ((262144*p^18)/(1 + p^2)^18 - (1114112*p^16)/(1 + p^2)^17 + 
    (1966080*p^14)/(1 + p^2)^16 - (1863680*p^12)/(1 + p^2)^15 + 
    (1025024*p^10)/(1 + p^2)^14 - (329472*p^8)/(1 + p^2)^13 + 
    (59136*p^6)/(1 + p^2)^12 - (5280*p^4)/(1 + p^2)^11 + 
    (180*p^2)/(1 + p^2)^10 - (1 + p^2)^(-9))/(1 + p^2), 
  ((524288*p^19)/(1 + p^2)^19 - (2359296*p^17)/(1 + p^2)^18 + 
    (4456448*p^15)/(1 + p^2)^17 - (4587520*p^13)/(1 + p^2)^16 + 
    (2795520*p^11)/(1 + p^2)^15 - (1025024*p^9)/(1 + p^2)^14 + 
    (219648*p^7)/(1 + p^2)^13 - (25344*p^5)/(1 + p^2)^12 + 
    (1320*p^3)/(1 + p^2)^11 - (20*p)/(1 + p^2)^10)/(1 + p^2), 
  ((1048576*p^20)/(1 + p^2)^20 - (4980736*p^18)/(1 + p^2)^19 + 
    (10027008*p^16)/(1 + p^2)^18 - (11141120*p^14)/(1 + p^2)^17 + 
    (7454720*p^12)/(1 + p^2)^16 - (3075072*p^10)/(1 + p^2)^15 + 
    (768768*p^8)/(1 + p^2)^14 - (109824*p^6)/(1 + p^2)^13 + 
    (7920*p^4)/(1 + p^2)^12 - (220*p^2)/(1 + p^2)^11 + (1 + p^2)^(-10))/
   (1 + p^2)];

fa=1;
factors=[1]++apply(1..30,i,fa=fa*i;fa);
n=round(|B,D|*2)+1;

t(x):=sum(1..n,i,((x+p)^(i-1))*coeffs_i);
plot(max(min(t(x),20),-20),color->(0.8,0,0));

drawtext(D+(0.2,0.2),"n="+(n-1));

//apply(1..20,i,draw(E+(i,0),E+(i,coeffs_i)))

;
</script>
    <script type="text/javascript">
var cdy = CindyJS({
  scripts: "cs*",
  defaultAppearance: {
    dimDependent: 0.7,
    fontFamily: "sans-serif",
    lineSize: 1,
    pointSize: 5.0,
    textsize: 12.0
  },
  angleUnit: "Â°",
  geometry: [
    {name: "A", type: "Free", pos: [-0.0, -4.0, -4.0], color: [1.0, 0.0, 0.0], alpha: 0.8999999761581421, labeled: true, printname: "p"},
    {name: "B", type: "Free", pos: [4.0, -2.857142857142857, -0.5714285714285714], color: [0.0, 0.0, 0.0], alpha: 0.8999999761581421, size: 2.0},
    {name: "C", type: "Free", pos: [-2.4, -4.0, -0.8], color: [0.0, 0.0, 0.0], alpha: 0.8999999761581421, size: 2.0},
    {name: "a", type: "Segment", color: [0.0, 0.0, 1.0], args: ["B", "C"], alpha: 0.8999999761581421},
    {name: "D", type: "PointOnSegment", pos: [3.585053280000001, -4.0, -0.8], color: [1.0, 1.0, 1.0], args: ["a"], alpha: 0.8999999761581421},
    {name: "E", type: "Free", pos: [4.0, -2.0938628158844765, -0.3610108303249097], color: [1.0, 0.0, 0.0], alpha: 0.8999999761581421, size: 0.0},
    {name: "Text0", type: "Text", pos: [-2.304838506319339, -4.0, -0.6534511796384492], color: [0.0, 0.0, 0.0], fillcolor: [0.012, 0.655, 0.737], fillalpha: 0.20000000298023224, alpha: 0.8999999761581421, text: "Taylor expansion for  \n\n  $f(x)={1\\over x^2+1}$    \n\nAround a point $p$ \nthis expansion is:   \n\n $\\sum_{i=0}^n\\left({f^{(i)}(x-p)\\over i!}(x-p)^i\\right)$", textsize: 15.0}
  ],
  ports: [{
    id: "CSCanvas",
    width: 708,
    height: 401,
    transform: [{visibleRect: [-7.853076325299833, 6.840471147551981, 7.400635713965687, -1.7989900498286313]}],
    axes: true,
    grid: 1.0,
    snap: true,
    background: "rgb(168,176,192)"
  }],
  csconsole: false,
  cinderella: {build: 1901, version: [2, 9, 1901]}
});
    </script>
</head>
<body>
    <div id="CSCanvas"></div>
</body>
</html>